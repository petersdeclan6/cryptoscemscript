<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3 App</title>
</head>
<body>
    <h1>User Information</h1>
    <p id="ipAddress"></p>
    <p id="country"></p>
    <p id="wallet"></p>
    <p id="walletStatus"></p>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script>
        window.addEventListener('load', async () => {
            // Check if Web3 is injected by the browser (MetaMask)
            if (typeof window.ethereum !== 'undefined') {
                window.web3 = new Web3(window.ethereum);
                await window.ethereum.enable(); // Request access to the user's accounts

                // Get user's IP address
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                document.getElementById('ipAddress').innerText = 'IP Address: ' + data.ip;

                // Get user's country (using a third-party service)
                const countryResponse = await fetch('https://ipapi.co/' + data.ip + '/country_name/');
                const countryData = await countryResponse.text();
                document.getElementById('country').innerText = 'Country: ' + countryData;

                // Get user's wallet address
                const accounts = await web3.eth.getAccounts();
                const walletAddress = accounts[0];
                document.getElementById('wallet').innerText = 'Wallet Address: ' + walletAddress;

                // Check wallet balance
                const balance = await web3.eth.getBalance(walletAddress);
                if (balance == 0) {
                    document.getElementById('walletStatus').innerText = 'Wallet is empty';
                } else {
                    document.getElementById('walletStatus').innerText = 'Wallet is not empty';
                }
            } else {
                document.getElementById('walletStatus').innerText = 'Please install MetaMask or use a Web3-enabled browser';
            }
        });
    </script>
</body>
</html>
